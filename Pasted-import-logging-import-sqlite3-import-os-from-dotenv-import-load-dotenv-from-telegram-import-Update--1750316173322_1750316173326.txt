import logging import sqlite3 import os from dotenv import load_dotenv from telegram import Update, ReplyKeyboardMarkup, KeyboardButton, InputFile from telegram.ext import Application, CommandHandler, MessageHandler, filters, ConversationHandler, ContextTypes

ğŸ” ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙˆÙƒÙ† Ù…Ù† Ù…Ù„Ù .env

load_dotenv() TOKEN = os.getenv("BOT_TOKEN") ADMIN_ID = int(os.getenv("ADMIN_ID"))  # Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø¯ÙŠØ±

ğŸ› ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø³Ø¬Ù„

logging.basicConfig(level=logging.INFO) logger = logging.getLogger(name)

ğŸ“¦ Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

def init_db(): with sqlite3.connect("ribeh.db") as conn: c = conn.cursor() c.execute('''CREATE TABLE IF NOT EXISTS users ( user_id INTEGER PRIMARY KEY, username TEXT, referrer INTEGER, investment INTEGER DEFAULT 0 )''') c.execute('''CREATE TABLE IF NOT EXISTS payments ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER, method TEXT, proof BLOB )''') conn.commit()

main_menu = [ ["ğŸ“¦ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª", "ğŸ’¼ Ù…Ù„ÙÙŠ Ø§Ù„Ø´Ø®ØµÙŠ"], ["ğŸ’³ Ø¥ÙŠØ¯Ø§Ø¹", "ğŸ’¸ Ø³Ø­Ø¨ Ø§Ù„Ø£Ù…ÙˆØ§Ù„"], ["ğŸ§¾ Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹", "ğŸ  Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"] ]

ğŸš€ Ø¨Ø¯Ø¡ Ø§Ù„Ø¨ÙˆØª

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE): user = update.effective_user reply_markup = ReplyKeyboardMarkup(main_menu, resize_keyboard=True) await update.message.reply_text( f"Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ {user.first_name} ÙÙŠ Ø¨ÙˆØª Ribeh Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠ ğŸ’¼\nØ§Ø®ØªØ± Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©:", reply_markup=reply_markup ) with sqlite3.connect("ribeh.db") as conn: c = conn.cursor() c.execute("INSERT OR IGNORE INTO users (user_id, username) VALUES (?, ?)", (user.id, user.username)) conn.commit()

async def show_packages(update: Update, context: ContextTypes.DEFAULT_TYPE): packages_text = """ ğŸ’¼ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© Ø§Ù„Ù…ØªØ§Ø­Ø©:

1ï¸âƒ£ Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø¨ØªØ¯Ø¦ÙŠÙ† - 2000 Ø¯Ø¬ â€¢ Ø¹Ø§Ø¦Ø¯ ÙŠÙˆÙ…ÙŠ: 50 Ø¯Ø¬ â€¢ Ù…Ø¯Ø© Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±: 45 ÙŠÙˆÙ… â€¢ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ø§Ø¦Ø¯: 2250 Ø¯Ø¬

2ï¸âƒ£ Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…ÙŠÙ† - 10000 Ø¯Ø¬
â€¢ Ø¹Ø§Ø¦Ø¯ ÙŠÙˆÙ…ÙŠ: 300 Ø¯Ø¬ â€¢ Ù…Ø¯Ø© Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±: 40 ÙŠÙˆÙ… â€¢ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ø§Ø¦Ø¯: 12000 Ø¯Ø¬

3ï¸âƒ£ Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø­ØªØ±ÙÙŠÙ† - 60000 Ø¯Ø¬ â€¢ Ø¹Ø§Ø¦Ø¯ ÙŠÙˆÙ…ÙŠ: 2000 Ø¯Ø¬ â€¢ Ù…Ø¯Ø© Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±: 35 ÙŠÙˆÙ… â€¢ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ø§Ø¦Ø¯: 70000 Ø¯Ø¬

ğŸ’¡ Ù„Ø§Ø®ØªÙŠØ§Ø± Ø¨Ø§Ù‚Ø©ØŒ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ ğŸ’³ Ø¥ÙŠØ¯Ø§Ø¹ """ await update.message.reply_text(packages_text, reply_markup=ReplyKeyboardMarkup(main_menu, resize_keyboard=True))

async def show_profile(update: Update, context: ContextTypes.DEFAULT_TYPE): user_id = update.effective_user.id user = update.effective_user with sqlite3.connect("ribeh.db") as conn: c = conn.cursor() c.execute("SELECT investment FROM users WHERE user_id = ?", (user_id,)) result = c.fetchone() invested = result[0] if result else 0 profile_text = f""" ğŸ‘¤ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ: ğŸ†” Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: {user_id} ğŸ“± Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: @{user.username or 'ØºÙŠØ± Ù…ØªÙˆÙØ±'} ğŸ‘‹ Ø§Ù„Ø§Ø³Ù…: {user.first_name} ğŸ’° Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±: {invested} Ø¯Ø¬ ğŸ“Š Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø³Ø§Ø¨: Ù†Ø´Ø· """ await update.message.reply_text(profile_text, reply_markup=ReplyKeyboardMarkup(main_menu, resize_keyboard=True))

async def deposit(update: Update, context: ContextTypes.DEFAULT_TYPE): deposit_text = """ ğŸ’³ Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹: 1ï¸âƒ£ ğŸ“± Ø¨Ø±ÙŠØ¯ÙŠ Ù…ÙˆØ¨ 2ï¸âƒ£ ğŸ’³ CCP 3ï¸âƒ£ ğŸŒ Wise 4ï¸âƒ£ ğŸ’° USDT

ğŸ“ Ø­ÙˆÙ„ Ø§Ù„Ù…Ø¨Ù„Øº Ø«Ù… Ø£Ø±Ø³Ù„ ğŸ§¾ Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹ """ await update.message.reply_text(deposit_text, reply_markup=ReplyKeyboardMarkup(main_menu, resize_keyboard=True))

async def withdrawal(update: Update, context: ContextTypes.DEFAULT_TYPE): text = """ ğŸ’¸ Ø§Ù„Ø³Ø­Ø¨: â€¢ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰: 1000 Ø¯Ø¬ â€¢ Ø±Ø³ÙˆÙ…: 2% â€¢ ÙˆÙ‚Øª Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©: 24-48 Ø³Ø§Ø¹Ø©

ğŸ“ Ø±Ø§Ø³Ù„ Ø§Ù„Ø¯Ø¹Ù…: @ribeh_support """ await update.message.reply_text(text, reply_markup=ReplyKeyboardMarkup(main_menu, resize_keyboard=True))

async def home(update: Update, context: ContextTypes.DEFAULT_TYPE): await update.message.reply_text("ğŸ  Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©", reply_markup=ReplyKeyboardMarkup(main_menu, resize_keyboard=True))

async def proof(update: Update, context: ContextTypes.DEFAULT_TYPE): await update.message.reply_text(""" ğŸ“· Ø£Ø±Ø³Ù„ ØµÙˆØ±Ø© Ø¥ÙŠØµØ§Ù„ Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¢Ù† â€¢ ÙŠØ¬Ø¨ Ø£Ù† ØªØªØ¶Ù…Ù† Ø§Ù„ØªØ§Ø±ÙŠØ®ØŒ Ø§Ù„Ù…Ø¨Ù„ØºØŒ ÙˆØ§Ø³Ù… Ø§Ù„Ù…Ø±Ø³Ù„ """) return 1

async def save_proof(update: Update, context: ContextTypes.DEFAULT_TYPE): user = update.effective_user if update.message.photo: photo_file = await update.message.photo[-1].get_file() photo_bytes = await photo_file.download_as_bytearray() with sqlite3.connect("ribeh.db") as conn: c = conn.cursor() c.execute("INSERT INTO payments (user_id, method, proof) VALUES (?, ?, ?)", (user.id, "manual", photo_bytes)) conn.commit() await context.bot.send_photo(chat_id=ADMIN_ID, photo=photo_bytes, caption=f"ğŸ“© Ø¥Ø«Ø¨Ø§Øª Ø¯ÙØ¹ Ø¬Ø¯ÙŠØ¯ Ù…Ù† @{user.username or 'Ù…Ø¬Ù‡ÙˆÙ„'} (ID: {user.id})") await update.message.reply_text("âœ… ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø¥Ø«Ø¨Ø§ØªØŒ Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹ØªÙ‡ Ù‚Ø±ÙŠØ¨Ù‹Ø§.", reply_markup=ReplyKeyboardMarkup(main_menu, resize_keyboard=True)) else: await update.message.reply_text("âŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ ØµÙˆØ±Ø© ÙˆØ§Ø¶Ø­Ø© ÙÙ‚Ø·.", reply_markup=ReplyKeyboardMarkup(main_menu, resize_keyboard=True)) return ConversationHandler.END

async def cancel(update: Update, context: ContextTypes.DEFAULT_TYPE): await update.message.reply_text("ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡ ğŸ›‘", reply_markup=ReplyKeyboardMarkup(main_menu, resize_keyboard=True)) return ConversationHandler.END

âœ… Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ±

async def admin_panel(update: Update, context: ContextTypes.DEFAULT_TYPE): if update.effective_user.id != ADMIN_ID: await update.message.reply_text("âŒ Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„.") return with sqlite3.connect("ribeh.db") as conn: c = conn.cursor() c.execute("SELECT COUNT() FROM users") total_users = c.fetchone()[0] c.execute("SELECT COUNT() FROM payments") total_payments = c.fetchone()[0] await update.message.reply_text(f"ğŸ‘‘ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…:\nğŸ‘¥ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†: {total_users}\nğŸ§¾ Ø¹Ø¯Ø¯ Ø§Ù„Ø¥Ø«Ø¨Ø§ØªØ§Øª: {total_payments}")

async def unknown(update: Update, context: ContextTypes.DEFAULT_TYPE): await update.message.reply_text("â“ Ù„Ù… Ø£ÙÙ‡Ù… Ø§Ù„Ø·Ù„Ø¨. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ø²Ø±Ø§Ø±.", reply_markup=ReplyKeyboardMarkup(main_menu, resize_keyboard=True))

def main(): init_db() app = Application.builder().token(TOKEN).build()

app.add_handler(CommandHandler("start", start))
app.add_handler(CommandHandler("admin", admin_panel))
app.add_handler(MessageHandler(filters.Regex("^(ğŸ“¦ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª)$"), show_packages))
app.add_handler(MessageHandler(filters.Regex("^(ğŸ’¼ Ù…Ù„ÙÙŠ Ø§Ù„Ø´Ø®ØµÙŠ)$"), show_profile))
app.add_handler(MessageHandler(filters.Regex("^(ğŸ’³ Ø¥ÙŠØ¯Ø§Ø¹)$"), deposit))
app.add_handler(MessageHandler(filters.Regex("^(ğŸ’¸ Ø³Ø­Ø¨ Ø§Ù„Ø£Ù…ÙˆØ§Ù„)$"), withdrawal))
app.add_handler(MessageHandler(filters.Regex("^(ğŸ  Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©)$"), home))

conv_handler = ConversationHandler(
    entry_points=[MessageHandler(filters.Regex("^(ğŸ§¾ Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ø¯ÙØ¹)$"), proof)],
    states={1: [MessageHandler(filters.PHOTO, save_proof)]},
    fallbacks=[CommandHandler("cancel", cancel)],
)
app.add_handler(conv_handler)

app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, unknown))

print("ğŸš€ ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨ÙˆØª...")
app.run_polling()

if name == "main": main()

